apiVersion: cloud.ibm.com/v1alpha1
kind: BillOfMaterial
metadata:
  name: 402-gitops-ocp-turbonomic-aws
  labels:
    type: software
    platform: aws
    code: '402'
  annotations:
    displayName: Turbonomic on OpenShift - AWS
    description: GitOps deployment of Turbonomic on AWS
spec:
  modules:
    # Login to existing OpenShift cluster
    - name: ocp-login

    # Create the GitOps Repo
    - name: gitops-repo
    # Install OpenShift GitOps and Bootstrap GitOps (aka. ArgoCD)
    - name: argocd-bootstrap
      variables:
        - name: create_webhook
          value: true

    # Create Name Space for Turbonomic
    - name: gitops-namespace
      variables:
        - name: name
          value: turbonomic

    # Install Turbonomic and define storage class for Turbonomic on AWS
    - name: gitops-ocp-turbonomic
      variables:
        - name: storage_class_name
          value: gp2
